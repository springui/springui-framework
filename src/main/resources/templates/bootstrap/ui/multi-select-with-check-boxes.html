<html xmlns:th="http://www.thymeleaf.org"
      xmlns:ui="http://www.springui/dialect/ui"
      th:remove="tag">

<th:block th:each="item : ${self.items}"
          th:with="idvp = ${self.itemDisplayValueProvider}">
    <div class="form-check">
        <input type="checkbox" class="form-check-input"
               th:field="*{components[__${self.id}__].selectedKeys}"
               th:value="${self.itemToKey(item)}"
               th:id="${#ids.seq(self.id)}">
        <label class="form-check-label"
               th:for="${#ids.prev(self.id)}">
            [[${idvp.getDisplayValue(item)}]]
        </label>
    </div>
</th:block>

</html>