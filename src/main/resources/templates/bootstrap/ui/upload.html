<html xmlns:th="http://www.thymeleaf.org"
      xmlns:ui="http://www.springui/dialect/ui"
      th:remove="tag">

<th:block th:with="token=${#ids.seq('upload')}">
    <div class="btn btn-primary btn-file">
        <span th:text="${self.caption?.value} ?: _">
            <i class="fa fa-upload"></i>
        </span>
        <input type="file" class="_hidden"
               th:name="${token}"
               th_data-action="@{__${self.ui.uploadPath}__(component=${self.id},token=${token})}"
               th:data-action="${#urls.upload(self,token)}">
    </div>
</th:block>
</html>